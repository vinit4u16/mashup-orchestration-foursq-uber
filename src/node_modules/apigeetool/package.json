{
  "name": "apigeetool",
  "version": "0.6.3",
  "description": "A CLI for Apigee Edge",
  "main": "lib/main.js",
  "bin": {
    "apigeetool": "./lib/cli.js"
  },
  "scripts": {
    "test": "mocha -R spec",
    "remotetest": "mocha -R spec remotetests"
  },
  "keywords": [
    "Apigee",
    "CLI"
  ],
  "authors": [
    "Greg Brail <greg@apigee.com>",
    "Scott Ganyo <sganyo@apigee.com>"
  ],
  "license": "MIT",
  "dependencies": {
    "async": "^1.4.2",
    "body-parser": "^1.14.0",
    "cli-table": "^0.3.0",
    "mustache": "^2.1.3",
    "node-unzip-2": "^0.2.1",
    "node-zip": "^1.1.1",
    "read": "^1.0.7",
    "request": "^2.63.0",
    "tmp": "^0.0.27",
    "underscore": "^1.8.3",
    "netrc": "^0.1.3",
    "q": "*"
  },
  "devDependencies": {
    "connect": "^3.4.0",
    "express": "^4.13.3"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/apigee/apigeetool-node.git"
  },
  "gitHead": "8671372dbfc6fea9a062716b53bf5f0214239e62",
  "readme": "# apigeetool\n\nThis is a tool for deploying API proxies and Node.js applications to the Apigee Edge platform. The tool also lets you list and undeploy API proxies.\n\n* [Installation](#installation)\n* [What you need to know about apigeetool](#whatyouneed)\n* [Command reference and examples](#reference)\n* [Original tool](#original)\n* [Contribution](#contrib)\n\n# <a name=\"installation\"></a>Installation\n\n`apigeetool` is a Node.js module and you can install it using npm:\n\n`npm install -g apigeetool`\n\n*NOTE*: The `-g` option places the apigeetool command in your PATH. On \"\\*nix\"-based machines, `sudo` may be required with the `-g` option. If you do not use `-g`, then you need to add the apigeetool command to your PATH manually. Typically, the `-g` option places modules in: `/usr/local/lib/node_modules/apigee-127` on *nix-based machines.\n\n# <a name=\"whatyouneed\"></a>What you need to know about apigeetool\n\nYou must have an account on Apigee Edge to perform any `apigeetool` functions. These functions include:\n\n* deploying an API proxy to Edge,\n* undeploying an API proxy from Edge,\n* deploying Node.js apps to Edge,\n* listing deployed API proxies on Edge,\n* retrieving deployed proxies and apps from Edge,\n* deleting proxy definitions from Edge, and\n* retreiving log messages from Node.js apps deployed to Edge.\n\nYou need to be familiar with basic concepts and features of Apigee Edge such as API proxies, organizations, and environments.\n\nFor more information, refer to the [Apigee Edge docs](http://apigee.com/docs/).\n\n# <a name=\"commonargs\"></a>Common Parameters\n\nThe following parameters are available on all of the commands supported by\nthis tool:\n\n`--baseuri   -L`  \n(optional) The base URI for you organization on Apigee Edge. The default is the base URI for Apigee cloud deployments is `api.enterprise.apigee.com`. For on-premise deployments, the base URL may be different.\n\n`--cafile -c`\n(optional) The names of one of more PEM files that represent trusted certificate authorities.\nMultiple file names may be comma-separated. Use this to communicate with an installation\nof Apigee Edge that uses a custom certificate for API calls.\n\n`--debug -D`  \n(optional) Prints additional information about the deployment, including router and message processor IDs.\n\n`--help  -h`  \n(optional) Displays help on this command.\n\n`--insecure -k`\n(optional) Do not validate the TLS certificate of the HTTPS target for API calls.\nUse this to communicate with an installation of Apigee Edge that does not use a\ntrusted TLS certificate.\n\n`--asynclimit -a`\n(optional) Limit for the maximum number of operations performed concurrently.\nCurrently this only affects file uploads in the `deploynodeapp` command. Defaults to 4.\n\n`--json  -j`  \n(optional) Formats the command's response as a JSON object.\n\n`--organization  -o`  \n(required) The name of the organization to deploy to. May be set as an environment variable APIGEE_ORGANIZATION.\n\n`--password  -p`\n(required) Your Apigee account password. May be set as an environment variable APIGEE_PASSWORD.\n\n`--username  -u`\n(required) Your Apigee account username. May be set as an environment variable APIGEE_USERNAME.\n\n`--token -t`\n(optional) Your Apigee access token. Use this in lieu of -u / -p/\n\n`--netrc  -n`  \n(optional) Use this in lieu of -u / -p, to tell apigeetool to retrieve credentials from your .netrc file.\n\n`--verbose   -V`  \n(optional) Prints additional information as the deployment proceeds.\n\n# <a name=\"reference\"></a>Command reference and examples\n\n* [deploynodeapp](#deploynodeapp)\n* [deployproxy](#deployproxy)\n* [undeploy](#undeploy)\n* [listdeployments](#listdeployments)\n* [fetchproxy](#fetchproxy)\n* [getlogs](#getlogs)\n* [delete](#delete)\n\n## <a name=\"deploynodeapp\"></a>deploynodeapp\n\nDeploys a Node.js app to Apigee Edge as an API proxy. With your Node.js app deployed to Edge, you can take advantage of Edge features like security, quotas, caching, analytics, trace tool, and more.\n\n#### Examples\n\nDeploys a Node.js app to Apigee Edge.\n\n    apigeetool deploynodeapp -u sdoe@apigee.com -o sdoe -e test -n 'Test Node App 2' -d . -m app.js -b /node2\n\nDeploys a Node.js app to both the default (HTTP) and secure (HTTPS) virtual hosts.\n\n    apigeetool deploynodeapp -u sdoe@apigee.com -o sdoe -e test -n 'Test Node App 2' -d . -m app.js -b /node2 -v default,secure\n\n#### Required parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nFor example, if you do not specify a password using \"-p\", apigeetool will\nprompt for the password on the command line.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--environments  -e`  \n(required) The name(s) of the environment(s) to deploy to (comma-delimited).  \n\n#### Optional parameters\n\n`--api   -n`  \n(optional) The name of the API proxy. The name of the API proxy must be unique within an organization. The characters you are allowed to use in the name are restricted to the following: `A-Z0-9._\\-$ %`. If not specified, will attempt to use name from package.json.\n\n`--base-path -b`  \n(optional) The base path of the API proxy. For example, for this API proxy, the base path is `/example-proxy`: `http://myorg-test.apigee.net/example-proxy/resource1`.\n\n`--directory -d`  \n(optional) The path to the root directory of the API proxy on your local system. Will attempt to use current directory is none is specified.\n\n`--import-only   -i`  \n(optional) Imports the API proxy to Apigee Edge but does not deploy it.\n\n`--main  -m`  \n(optional) The Node.js file you want to be the main file. If not specified, will attempt to use main from package.json.\n\n`--preserve-policies -P`  \n(optional) If specified, the highest revision of the existing proxy will be downloaded and the node code in your directory will be overlayed upon it to create a resulting proxy that contains both any existing policies and the node code in the directory. If there is no existing revision, this option will have no effect. \n\n`--resolve-modules   -R`  \n(optional) If the API proxy includes Node.js modules (e.g., in a `node_modules` directory), this option updates them on Apigee Edge without uploading them from your system. Basically, it's like running \"npm install\" on Apigee Edge in the root directory of the API proxy bundle.  \n\n`--upload-modules    -U`  \n(optional) If specified, uploads Node.js modules from your system to Apigee Edge rather than resolving the modules directly on Apigee Edge (the default behavior).\n\n`--virtualhosts  -v`  \n(optional) A comma-separated list of virtual hosts that the deployed app will use. The two most common options are `default` and `secure`. The `default` option is always HTTP and `secure` is always HTTPS. By default, `apigeetool deploynodeapp` uses `default,secure`.\n\n## <a name=\"deployproxy\"></a>deployproxy\n\nDeploys an API proxy to Apigee Edge. If the proxy is currently deployed, it will be undeployed first, and the newly deployed proxy's revision number is incremented.\n\n#### Example\n\nDeploys an API proxy called example-proxy to Apigee Edge. Per the `-d` flag, the command is executed in the root directory of the proxy bundle.\n\n    apigeetool deployproxy  -u sdoe@example.com -o sdoe  -e test -n example-proxy -d .\n\n#### Required parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--api   -n`  \n(required) The name of the API proxy. Note: The name of the API proxy must be unique within an organization. The characters you are allowed to use in the name are restricted to the following: `A-Z0-9._\\-$ %`.\n\n`--environments  -e`  \n(required) The name(s) of the environment(s) to deploy to (comma delimited).  \n\n#### Optional parameters\n\n`--base-path -b`  \n(optional) The base path of the API proxy. For example, for this API proxy, the base path is /example-proxy: http://myorg-test.apigee.net/example-proxy/resource1.\n\n`--directory -d`  \n(optional) The path to the root directory of the API proxy on your local system. Will attempt to use current directory is none is specified.\n\n`--import-only   -i`  \n(optional) Imports the API proxy to Apigee Edge but does not deploy it.\n\n`--resolve-modules   -R`  \n(optional) If the API proxy includes Node.js modules (e.g., in a `node_modules` directory), this option updates them on Apigee Edge without uploading them from your system. Basically, it's like running npm on Apigee Edge in the root directory of the API proxy bundle.  \n\n`--upload-modules    -U`  \n(optional) If specified, uploads Node.js modules from your system to Apigee Edge.\n\n## <a name=\"undeploy\"></a>undeploy\n\nUndeploys a named API proxy or Node.js app deployed on Apigee Edge.\n\n#### Example\n\nUndeploy the proxy named \"example-proxy\".\n\n    apigeetool undeploy -u sdoe@example.com -o sdoe  -n example-proxy -e test -D\n\n#### Required parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--api   -n`  \n(required) The name of the API proxy or app to undeploy.\n\n`--environment   -e`  \n(required) The environment on Apigee Edge where the API proxy or app is currently deployed.\n\n#### Optional parameters\n\n`--revision  -r`  \n(optional) Specify the revision number of the API proxy to undeploy.\n\n## <a name=\"listdeployments\"></a>listdeployments\n\nLists the API proxies deployed on Apigee Edge for the specified organization. Lets you filter the result by API proxy name or environment.\n\n#### Examples\n\nList all API proxies in an organization:\n\n    $ apigeetool listdeployments -u sdoe@example.com -o sdoe -e test`\n\nList API proxies named \"example-proxy\":\n\n    $ apigeetool listdeployments -u sdoe@example.com -o sdoe -n example-proxy\n\n#### Required parameters\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n#### Required, mutually exclusive parameters\n\n`--api   -n`\n(You must specify either `api` or `environment` in this command) The name of the API proxy to list.\n\n`--environment   -e`  \n(You must specify either `api` or `environment` in this command) The environment for which you want to list deployments. When `-e` is specified, the command lists all deployed proxies in the environment.\n\n#### Optional parameters\n\n`--long  -l`\n(optional) Returns additional information about the API proxy or Node.js app,\nincluding the URL to use as the base path for each one.\n\n`--revision  -r`\n(optional) Filters the list by the specified revision number.\n\n## <a name=\"fetchproxy\"></a>fetchproxy\n\nFetches a deployed API proxy or Node.js application from Apigee Edge. The\nresult will be a ZIP file that contains the contents of the entire\nproxy.\n\nRegardless of whether \"deployproxy\" or \"deploynodeapp\" is used to deploy the\nproxy or app, the result of \"fetchproxy\" will always be a ZIP file that\nrepresents an API proxy. The resulting proxy may be \"unzipped\" and\nre-deployed using \"deployproxy.\"\n\n#### Example\n\nFetch the deployed proxy named \"example-proxy\".\n\n    apigeetool fetchproxy -u sdoe@example.com -o sdoe -n example-proxy -r 1\n\n#### Required parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--api  -n`  \n(required) The name of the API proxy or app to undeploy.\n\n`--revision  -r`\n(optional) Specifies the revision to retrieve.\n\n#### Optional parameters\n\n`--file -f`\n(optional) The name of the file to write as the result. If not specified,\nthen the file name will be the same as the name passed to the \"name\"\nparameter.\n\n## <a name=\"delete\"></a>delete\n\nDelete all revisions of a proxy from Apigee Edge.\n\nIt is an error to delete a proxy that still has deployed revisions. Revisions\nmust be undeployed using \"undeploy\" before this command may be used.\n\n#### Example\n\nDelete the proxy named \"example-proxy\".\n\n    apigeetool delete -u sdoe@example.com -o sdoe -n example-proxy\n\n#### Required parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--api  -n`  \n(required) The name of the API proxy or app to undeploy.\n\n## <a name=\"getlogs\"></a>getlogs\n\nRetrieve the last set of log records from a Node.js application deployed to Apigee Edge.\n\nThe resulting log files will be written directly to standard output. Each is prefixed with:\n\n* A timestamp, in UTC by default\n* An indication of whether the log record came from standard output or standard error\n* A unique identifier of the server where the log was generated.\n\nSince Apigee Edge, by default, deploys each Node.js application on at least two\ndifferent servers, most applications will see at least two sets of logs. These are\nsorted in time stamp order.\n\nThe log records from this command come from a cache inside Apigee Edge that retains\nthe last 500 lines of log output from each server. The cache is a circular buffer,\nso older messages will be discarded when it fills up.\n\nBy default, the last set of log records will be pulled and written to standard output. However, if the\n\"-f\" option is used, then \"apigeetool\" will poll Edge for new log records and append them to standard\noutput, in the manner of \"tail -f\". (By default, the tool polls every\nfive seconds).\n\nFor example, a set of log records might look like this:\n\n<pre>\n[2014-11-05T01:30:01.530Z nodejs/stderr svr.362] *** Starting script\n[2014-11-05T01:30:09.182Z nodejs/stderr svr.362] 2014-11-05T01:30:09.181Z - debug: 1/4. this is a debug log\n[2014-11-05T01:30:09.186Z nodejs/stdout svr.362] 2014-11-05T01:30:09.186Z - info: 2/4. this is an info log\n[2014-11-05T01:30:09.187Z nodejs/stdout svr.362] 2014-11-05T01:30:09.187Z - warn: 3/4. this is a warning log\n[2014-11-05T01:30:09.188Z nodejs/stderr svr.362] 2014-11-05T01:30:09.188Z - error: 4/4. this is an error log\n[2014-11-05T01:48:21.419Z nodejs/stderr svr.828] *** Starting script\n[2014-11-05T01:48:28.637Z nodejs/stderr svr.828] js-bson: Failed to load c++ bson extension, using pure JS version\n[2014-11-05T01:48:29.801Z nodejs/stderr svr.828] 2014-11-05T01:48:29.800Z - debug: 1/4. this is a debug log\n[2014-11-05T01:48:29.804Z nodejs/stdout svr.828] 2014-11-05T01:48:29.804Z - info: 2/4. this is an info log\n[2014-11-05T01:48:29.805Z nodejs/stdout svr.828] 2014-11-05T01:48:29.805Z - warn: 3/4. this is a warning log\n[2014-11-05T01:48:29.806Z nodejs/stderr svr.828] 2014-11-05T01:48:29.806Z - error: 4/4. this is an error log\n</pre>\n\n#### Required Parameters\n\nThe following parameters are required. However, if any are left unspecified\non the command line, and if apigeetool is running in an interactive shell,\nthen apigeetool will prompt for them.\n\nSee [Common Parameters](#commonargs) for a list of additional parameters, including\nthe \"-u\" and \"-p\" parameters for username and password, and the \"-o\" parameter\nfor organization name, all of which are required.\n\n`--api  -n`  \n(required) The name of the deployed app to get logs from.\n\n`--environment   -e`  \n(required) The environment on Apigee Edge where the app is currently deployed.\n\n#### Optional Parameters\n\n`--streaming  -f`\n(optional) If specified, do not exit, but instead poll Apigee Edge for new log\nrecords and write them to standard output in the manner of \"tail -f.\"\n\n`--timezone  -z`\n(optional) If specified, use the time zone to format the timestamps on the\nlog records. If not specified, then the default is UTC. The timestamp name\nshould be a name such as \"PST.\"\n\n# <a name=\"original\"></a>Original Tool\n\nThis module replaces the original \"apigeetool,\" which was written in Python.\nIt is also called \"apigeetool\" and resides here:\n\nhttps://github.com/apigee/api-platform-tools\n\n# <a name=\"contrib\"></a>Contribution\n\nTo run remotetests, provide your edge creds, org, env details in `remotetest/testconfig.js` similar to 'remotetest/testconfig-sample.js'\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/apigee/apigeetool-node/issues"
  },
  "homepage": "https://github.com/apigee/apigeetool-node#readme",
  "_id": "apigeetool@0.6.3",
  "_shasum": "6899d87bda1454398c77dd4f7de43774ba5a6b26",
  "_from": "mukundha/apigeetool-node",
  "_resolved": "git://github.com/mukundha/apigeetool-node.git#8671372dbfc6fea9a062716b53bf5f0214239e62"
}
